## ðŸ§¾ **HistÃ³ria do UsuÃ¡rio â€“ GestÃ£o de Plantas (Fase 1)**

**TÃ­tulo:** Admins e usuÃ¡rios autorizados gerenciam plantas no sistema XYZ.

**Como** usuÃ¡rio autorizado,
**Quero** criar, editar, buscar e (se admin) excluir plantas,
**Para** manter dados precisos e Ãºnicos para futuras fases do sistema.

---

## âœ… **CritÃ©rios de AceitaÃ§Ã£o**

- Criar planta com cÃ³digo numÃ©rico Ãºnico e descriÃ§Ã£o opcional (atÃ© 10 caracteres).
- Editar descriÃ§Ã£o de plantas existentes.
- Buscar por cÃ³digo ou parte da descriÃ§Ã£o.
- Apenas admins podem excluir plantas.
- CÃ³digos duplicados nÃ£o sÃ£o permitidos.
- Todas as aÃ§Ãµes disponÃ­veis via API REST, documentadas no Swagger com botÃ£o "Try it out".

---

## ðŸ“œ **Regras de NegÃ³cio**

| Regra | Detalhes |
|-------|----------|
| CÃ³digo Ãºnico | Cada planta deve ter um cÃ³digo numÃ©rico exclusivo. |
| DescriÃ§Ã£o | Opcional, com no mÃ¡ximo 10 caracteres. |
| ExclusÃ£o | Somente admins podem excluir. |
| IdentificaÃ§Ã£o de admin | Feita via cabeÃ§alho `X-Admin` na API. |
| ExclusÃ£o definitiva | Sem arquivamento ou exclusÃ£o lÃ³gica. |

---

## ðŸ›¡ï¸ **ValidaÃ§Ãµes e SeguranÃ§a**

### ðŸ” ValidaÃ§Ãµes
- `code`: ObrigatÃ³rio, numÃ©rico e Ãºnico.
- `description`: Opcional, atÃ© 10 caracteres.
- CÃ³digos repetidos geram erro claro.

### ðŸ” SeguranÃ§a
- Controle de acesso por papel: sÃ³ admins podem excluir (via `X-Admin`).
- Swagger exige `X-Admin` para deletar.
- Erros:
  - AÃ§Ã£o nÃ£o autorizada â†’ `403 Forbidden`
  - Dados invÃ¡lidos â†’ `400 Bad Request`

---

## ðŸ§ª **Testes**

### âœ… Funcionais
- Criar planta vÃ¡lida.
- Editar descriÃ§Ã£o.
- Buscar por cÃ³digo ou descriÃ§Ã£o parcial.
- Excluir como admin.
- Tentar excluir como nÃ£o-admin (espera-se erro 403).

### âš ï¸ Casos Limite

| CenÃ¡rio | Resultado Esperado |
|--------|---------------------|
| CÃ³digo nÃ£o numÃ©rico | Erro de validaÃ§Ã£o |
| CÃ³digo duplicado | Erro de duplicaÃ§Ã£o |
| DescriÃ§Ã£o > 10 caracteres | Erro de validaÃ§Ã£o |
| ExclusÃ£o com `X-Admin: false` | Erro 403 |
| Busca com descriÃ§Ã£o vazia | Retorna todas |
| Atualizar planta inexistente | Erro 404 |
| Excluir planta inexistente | Erro 404 |

---

## ðŸ§ª Exemplo com cURL

```bash
# Criar planta duplicada
curl -X POST http://localhost:8080/api/plants \
  -H "Content-Type: application/json" \
  -d '{"code": 101, "description": "Planta A"}'

curl -X POST http://localhost:8080/api/plants \
  -H "Content-Type: application/json" \
  -d '{"code": 101, "description": "Planta B"}'
# Esperado: 400 Bad Request â€“ CÃ³digo duplicado
```

